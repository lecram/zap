#summary Compilando zap.

= Introdução =

O interpretador zap pode ser facilmente compilado a partir do código fonte. São necessários um cliente Subversion e um compilador C ANSI. A ferramenta GNU make pode ser utilizada para facilitar o processo, e é especialmente indicada se você pretende fazer alterações e testes no código.

= Obtendo o código fonte =

Os arquivos de código fonte do interpretador zap são mantidos em um repositório Subversion (SVN). Para fazer o check out anônimo do repositório, transferindo os arquivos para o seu computador, deve-se usar o seguinte comando:

{{{
% svn checkout http://zap.googlecode.com/svn/trunk/ zap
}}}

Os arquivos serão copiados para o diretório zap, conforme especificado.

= Compilando =

Para compilar o código, mova para o subdiretório src:

{{{
% cd zap/src
}}}

A maneira mais conveniente de compilar os arquivos é invocando o GNU make.

O arquivo Makefile em zap/src permite compilar o interpretador zap com apenas um comando. Em ambiente Linux normalmente o comando é o mais simples possível:

{{{
% make
}}}

Isto fará com que o shell e compilador padrões (e.g. bash e GCC) sejam utilizados.

No Windows, alguns cuidados extras são necessários. Deve-se especificar as variáveis SHELL, CC e BINEXT.

SHELL determina o ambiente shell utilizado e seu valor típico é "cmd".

CC determina o compilador utilizado. Se estiver utilizando o GCC da distribuição MinGW, seu valor típico é "C:\MinGW\bin\gcc" (ou apenas "gcc", caso o diretório "C:\MinGW\bin\" esteja listado na variável %PATH% do sistema operacional).

BINEXT determina a extensão do arquivo binário gerado e seu valor típico é ".exe".

Para invocar o GNU make no Windows, fornecendo os argumentos adequados, pode-se utilizar o comando típico:

{{{
% make SHELL=cmd CC=gcc BINEXT=.exe
}}}

Ou ainda salvar os valores dos argumentos em um arquivo de nome "env" (sem extensão), no diretório zap/src. O conteúdo de um "env" típico é listado abaixo.

{{{
SHELL = cmd
CC = gcc
BINEXT = .exe
RM = del
}}}

Este arquivo permite que o interpretador zap seja compilado no Windows de forma semelhante ao procedimento em ambiente Linux, apenas invocando o GNU make, sem argumentos. A variável RM será utilizada somente para chamadas de "make clean".
